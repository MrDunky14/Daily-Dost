<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily-Dost - Student Habit & Study Tracker</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com/3.4.1"></script>
    <!-- Chart.js for graphs -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <!-- Add these animation libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

    <link rel="stylesheet" href="styles.css">
    <style>
        /* --- Motivational Quotes Section --- */
        .quote-card {
          text-align: center;
          margin-top: 24px;
          padding: 28px 24px;
        }
        
        .quote-text {
          font-size: clamp(18px, 2.2vw, 22px);
          font-weight: 700;
          line-height: 1.6;
          font-style: italic;
          letter-spacing: 0.2px;
          background: linear-gradient(90deg, var(--primary), var(--accent));
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
          position: relative;
          opacity: 0;
          transform: translateY(10px);
          transition: opacity 420ms ease, transform 420ms ease;
        }
        
        .quote-text.show {
          opacity: 1;
          transform: translateY(0);
        }
        
        .quote-text::before,
        .quote-text::after {
          content: "‚Äú";
          color: var(--secondary);
          opacity: 0.5;
          font-size: 28px;
          position: relative;
          top: -2px;
          margin: 0 6px;
        }
        
        .quote-text::after { content: "‚Äù"; }
        
        .quote-meta {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 12px;
          margin-top: 12px;
          color: var(--secondary);
        }
        
        .quote-author {
          font-weight: 600;
          letter-spacing: 0.2px;
        }
        
        .quote-refresh {
          background: transparent;
          color: var(--primary);
          border: 2px solid var(--primary);
          padding: 8px 14px;
          border-radius: 12px;
        }
        
        .quote-refresh:hover {
          background: var(--primary);
          color: var(--primary-foreground);
          border-color: var(--primary);
        }
        
        /* Mobile tweaks */
        @media (max-width: 768px) {
          .quote-card { padding: 22px 18px; }
          .quote-text { font-size: clamp(16px, 3.6vw, 20px); }
        }

    </style>
</head>
<body class="antialiased">

    <!-- Main Container -->
    <div id="app-container" class="max-w-7xl mx-auto p-4 md:p-6 lg:p-8 relative">

        <!-- Loading Overlay -->
        <div id="loading-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
            <div class="loading-animation h-16 w-16 rounded-full border-4 border-gray-300"></div>
        </div>

        <!-- Header -->
        <header class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
            <h1 class="text-3xl md:text-4xl font-bold text-center md:text-left">
                Daily<span style="color: var(--primary);">Dost</span>
            </h1>
            <div class="flex items-center gap-4">
                 <!-- User Profile Section -->
                <div id="user-profile" class="flex items-center gap-3 card p-2 rounded-lg">
                    <img id="user-avatar" src="https://placehold.co/40x40/cbd5e1/7c3aed?text=L1" class="rounded-full w-10 h-10 border-2" style="border-color: var(--xp-bar);" alt="User Avatar">
                    <div>
                        <div class="font-bold text-sm" id="user-level">Level 1</div>
                        <div class="w-24 bg-gray-200 dark:bg-slate-600 rounded-full h-2.5">
                            <div id="xp-bar" class="h-2.5 rounded-full" style="width: 0%; background-color: var(--xp-bar); transition: width 0.5s;"></div>
                        </div>
                        <div id="xp-text" class="text-xs text-center text-gray-500 dark:text-gray-400">0/100 XP</div>
                    </div>
                </div>
                <button id="dark-mode-toggle" class="p-2 rounded-full card">
                    <svg id="theme-icon-sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>
                    <svg id="theme-icon-moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>
                </button>
            </div>
            <div class="flex items-center gap-3">
        </header>

        <!-- Tabs -->
        <div class="mb-6">
            <div class="border-b" style="border-color: var(--card-border);">
                <nav class="-mb-px flex space-x-4 overflow-x-auto" aria-label="Tabs">
                    <button id="tab-dashboard" class="tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent" style="color: var(--primary); border-color: var(--primary);">Dashboard</button>
                    <button id="tab-study" class="tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent" style="color: var(--secondary);">Study Zone</button>
                    <button id="tab-analytics" class="tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent" style="color: var(--secondary);">Analytics</button>
                    <button id="tab-rewards" class="tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent" style="color: var(--secondary);">Rewards</button>
                </nav>
            </div>
        </div>

        <!-- Main Content Area -->
        <main id="main-content">
            <!-- Dashboard View -->
            <div id="dashboard-view" class="view space-y-6">
                 <!-- Mental Health & Sleep Tracking -->
                 <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                     <div class="card rounded-xl p-4">
                        <h3 class="text-sm font-medium text-center" style="color: var(--secondary);">Daily Check-in</h3>
                        <div class="mt-3 space-y-3">
                            <div>
                                <label class="block text-xs font-medium mb-1">Mood:</label>
                                <div id="mood-tracker" class="flex justify-around text-3xl">
                                    <button data-mood="sad" class="mood-btn p-1 rounded-full transition-transform transform hover:scale-125">üòû</button>
                                    <button data-mood="neutral" class="mood-btn p-1 rounded-full transition-transform transform hover:scale-125">üòê</button>
                                    <button data-mood="happy" class="mood-btn p-1 rounded-full transition-transform transform hover:scale-125">üòä</button>
                                </div>
                            </div>
                            <div>
                                <label class="block text-xs font-medium mb-1">Stress Level:</label>
                                <div id="stress-tracker" class="flex justify-around text-xs">
                                     <button data-stress="low" class="stress-btn p-2 rounded-full w-12 h-12 flex items-center justify-center border-2">Low</button>
                                     <button data-stress="medium" class="stress-btn p-2 rounded-full w-12 h-12 flex items-center justify-center border-2">Mid</button>
                                     <button data-stress="high" class="stress-btn p-2 rounded-full w-12 h-12 flex items-center justify-center border-2">High</button>
                                </div>
                            </div>
                        </div>
                    </div>
                     <div class="card rounded-xl p-4 flex flex-col justify-center items-center">
                        <h3 class="text-sm font-medium" style="color: var(--secondary);">Last Night's Sleep</h3>
                        <div class="flex items-center gap-2 mt-3">
                            <input id="sleep-hours" type="number" min="0" max="24" step="0.5" class="w-20 p-2 text-center text-2xl font-bold rounded-lg" style="background-color: var(--background); border: 1px solid var(--card-border);" placeholder="8.0">
                            <span class="font-semibold">hours</span>
                        </div>
                        <button id="save-sleep-btn" class="mt-2 text-xs p-2 rounded-md" style="background-color: var(--primary); color: white;">Save Sleep</button>
                    </div>
                    <div class="card rounded-xl p-4 flex flex-col justify-center items-center text-center">
                        <h3 class="text-sm font-medium" style="color: var(--secondary);">Daily Progress</h3>
                        <div class="relative w-24 h-24 mt-2">
                             <svg class="w-full h-full -rotate-90" viewBox="0 0 36 36">
                                <circle class="text-gray-200 dark:text-slate-700" stroke-width="3" stroke="currentColor" fill="transparent" r="15.9155" cx="18" cy="18" />
                                <circle id="daily-progress-circle" style="stroke: var(--accent); transition: stroke-dashoffset 0.5s;" stroke-width="3" stroke-linecap="round" stroke="currentColor" fill="transparent" r="15.9155" cx="18" cy="18" />
                            </svg>
                            <div id="daily-progress-text" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-xl font-bold">0%</div>
                        </div>
                    </div>
                </div>
                
                <!-- Habits List -->
                <div class="card rounded-xl p-4 md:p-6">
                     <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-bold">Today's Habits</h2>
                        <button id="add-habit-btn" class="flex items-center gap-2 text-white font-bold py-2 px-4 rounded-lg" style="background-color: var(--primary);"><span>Add Habit</span></button>
                    </div>
                    <div id="habits-list" class="space-y-3 max-h-[40vh] overflow-y-auto pr-2"></div>
                    <div id="empty-habits-message" class="text-center py-8" style="color: var(--secondary);"><p>No habits for today. Add one to get started!</p></div>
                </div>
                <!-- Motivational Quotes Section -->
                <section id="motivational-quotes" class="card quote-card aria-live="polite">
                  <h2 class="section-title">Daily motivation</h2>
                  <blockquote class="quote-text" id="quoteText">Loading inspiration‚Ä¶</blockquote>
                  <div class="quote-meta">
                    <span class="quote-author" id="quoteAuthor"></span>
                    <button id="quoteRefresh" class="btn-animate quote-refresh" type="button" aria-label="Show another quote">
                      New quote
                    </button>
                  </div>
                </section>
            </div>

            <!-- Study Zone View -->
            <div id="study-view" class="view hidden grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Pomodoro Timer -->
                <div class="lg:col-span-2 card rounded-xl p-4 md:p-6 flex flex-col items-center justify-center">
                    <h2 class="text-xl font-bold mb-4">Pomodoro Timer</h2>
                    <div class="flex gap-2 mb-6">
                        <button id="pomodoro-work-btn" data-mode="work" class="pomodoro-btn p-2 rounded-md border" style="border-color: var(--card-border);">Work (25 min)</button>
                        <button id="pomodoro-short-break-btn" data-mode="shortBreak" class="pomodoro-btn p-2 rounded-md border" style="border-color: var(--card-border);">Short Break (5 min)</button>
                        <button id="pomodoro-long-break-btn" data-mode="longBreak" class="pomodoro-btn p-2 rounded-md border" style="border-color: var(--card-border);">Long Break (15 min)</button>
                    </div>
                    <div id="pomodoro-timer" class="text-7xl md:text-8xl font-bold mb-6">25:00</div>
                    <div class="flex gap-4">
                        <button id="pomodoro-start-btn" class="text-white font-bold py-3 px-6 rounded-lg text-lg" style="background-color: var(--primary);">Start</button>
                        <button id="pomodoro-reset-btn" class="font-bold py-3 px-6 rounded-lg text-lg" style="color: var(--secondary);">Reset</button>
                    </div>
                </div>

                <!-- Assignment Tracker -->
                <div class="card rounded-xl p-4 md:p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-bold">Assignments</h2>
                        <button id="add-assignment-btn" class="flex items-center justify-center w-8 h-8 rounded-full" style="background-color: var(--primary); color: white;">+</button>
                    </div>
                    <div id="assignment-list" class="space-y-3 max-h-[50vh] overflow-y-auto"></div>
                    <div id="empty-assignments-message" class="text-center py-8" style="color: var(--secondary);"><p>No upcoming assignments. Great job!</p></div>
                </div>
            </div>

            <!-- Analytics View -->
            <div id="analytics-view" class="view hidden space-y-6">
                 <div class="card rounded-xl p-4 md:p-6">
                    <h2 class="text-xl font-bold mb-4">Academic & Wellness Correlation</h2>
                    <p class="text-sm mb-4" style="color:var(--secondary)">Track how your habits, mood, and sleep impact your academic performance. Log your grades to see the trends.</p>
                     <div class="flex items-center justify-between mb-4">
                        <div>
                            <label for="gpa-target-input" class="text-sm font-medium">Target GPA:</label>
                            <input type="number" id="gpa-target-input" step="0.1" min="0" max="5" class="w-20 p-1 rounded-md border ml-2" style="background-color:var(--background); border-color:var(--card-border);">
                        </div>
                        <button id="add-grade-btn" class="p-2 rounded-md text-sm" style="background-color: var(--primary); color: white;">Log a Grade</button>
                    </div>
                    <canvas id="correlation-chart"></canvas>
                </div>
                <div class="card rounded-xl p-4 md:p-6">
                    <h2 class="text-xl font-bold mb-4">Habit Deep Dive</h2>
                    <select id="habit-analytics-selector" class="w-full p-2 rounded-md border mb-4" style="background-color: var(--background); border-color: var(--card-border);"></select>
                    <div id="deep-dive-content" class="hidden space-y-6">
                         <div><h3 class="font-semibold mb-2">Completion Trend</h3><canvas id="trends-chart"></canvas ></div>
                        <div><h3 class="font-semibold mb-2">Activity Heatmap</h3><div id="heatmap-container" class="grid grid-cols-7 gap-1 text-xs"></div></div>
                    </div>
                </div>
            </div>

            <!-- Rewards View -->
            <div id="rewards-view" class="view hidden">
                <div class="card rounded-xl p-4 md:p-6">
                    <h2 class="text-xl font-bold mb-4">Achievements</h2>
                    <div id="achievements-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4"></div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal Container -->
    <div id="modal-container" class="fixed inset-0 bg-black bg-opacity-60 z-40 items-center justify-center p-4 hidden"></div>

    <!-- Firebase SDKs -->
    <script type="module" src="app.js">
    </script>
    <script>
      (function () {
        const QUOTES = [
          { text: "Small daily improvements are the key to long-term results.", author: "Unknown" },
          { text: "Discipline is choosing what is wanted most over what is wanted now.", author: "Abraham Lincoln" },
          { text: "Focus on progress, not perfection.", author: "Bill Phillips" },
          { text: "What gets measured gets improved.", author: "Peter Drucker" },
          { text: "The secret of getting ahead is getting started.", author: "Mark Twain" },
          { text: "Consistency beats intensity.", author: "Unknown" },
          { text: "Dream big. Start small. Act now.", author: "Robin Sharma" },
          { text: "Energy flows where attention goes.", author: "Tony Robbins" },
          { text: "Don‚Äôt count the days; make the days count.", author: "Muhammad Ali" },
          { text: "Action is the foundational key to success.", author: "Pablo Picasso" },
          { text: "Simplicity is the ultimate sophistication.", author: "Leonardo da Vinci" },
          { text: "If it‚Äôs important, schedule it.", author: "Stephen Covey" }
        ];
    
        const $text = document.getElementById("quoteText");
        const $author = document.getElementById("quoteAuthor");
        const $refresh = document.getElementById("quoteRefresh");
    
        if (!$text || !$author) return;
    
        function dayKey(d = new Date()) {
          return d.toISOString().slice(0, 10); // YYYY-MM-DD
        }
    
        function pickIndex(exclude = -1) {
          if (QUOTES.length === 1) return 0;
          let idx = Math.floor(Math.random() * QUOTES.length);
          if (idx === exclude) idx = (idx + 1) % QUOTES.length;
          return idx;
        }
    
        function setQuote(idx) {
          const q = QUOTES[idx];
          // Animate in
          $text.classList.remove("show");
          requestAnimationFrame(() => {
            requestAnimationFrame(() => {
              $text.textContent = q.text;
              $author.textContent = q.author ? "‚Äî " + q.author : "";
              $text.classList.add("show");
            });
          });
        }
    
        // Persist per day to avoid jarring changes
        const KEY = "motivation:index:" + dayKey();
        let idx = Number(localStorage.getItem(KEY));
        if (!Number.isInteger(idx) || idx < 0 || idx >= QUOTES.length) {
          idx = pickIndex();
          localStorage.setItem(KEY, String(idx));
        }
        setQuote(idx);
    
        // Optional: manual refresh (does not change the daily key, so temporary)
        if ($refresh) {
          $refresh.addEventListener("click", () => {
            idx = pickIndex(idx);
            setQuote(idx);
          });
        }
      })();
    </script>

    
</body>
</html>




