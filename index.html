<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudiOS - Student Habit & Study Tracker</title>

    <link rel="manifest" href="manifest.json">


    <!-- Fonts + Icons (Template) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet">

    <!-- Tailwind CSS (Template + plugins) -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script id="tailwind-config">
        tailwind.config = {
            // Keep compatibility with existing theme toggle (data-theme) and template (class-based)
            darkMode: ['class', '[data-theme="dark"]'],
            theme: {
                extend: {
                    colors: {
                        "primary": "#8b5cf6",
                        "primary-light": "#a78bfa",
                        "primary-glow": "rgba(139, 92, 246, 0.25)",
                        "secondary": "#22d3ee",
                        "secondary-light": "#67e8f9",
                        "secondary-glow": "rgba(34, 211, 238, 0.25)",
                        "tertiary": "#34d399",
                        "tertiary-light": "#6ee7b7",
                        "tertiary-glow": "rgba(52, 211, 153, 0.25)",
                        "accent": "#facc15",
                        "accent-light": "#fde047",
                        "accent-glow": "rgba(250, 204, 21, 0.25)",
                        "danger": "#f87171",
                        "glass-bg": "rgba(30, 41, 59, 0.4)",
                        "glass-border": "rgba(71, 85, 105, 0.6)",
                        "background-light": "#0f172a",
                        "background-dark": "#1e293b",
                        "text-default": "#e2e8f0",
                        "text-muted": "#94a3b8",
                    },
                    fontFamily: {
                        "display": ["Space Grotesk", "sans-serif"],
                        "mono": ["Space Grotesk", "monospace"],
                    },
                    borderRadius: {
                        "DEFAULT": "0.5rem",
                        "lg": "1rem",
                        "xl": "1.5rem",
                        "2xl": "2rem",
                        "3xl": "2.5rem",
                    },
                    boxShadow: {
                        'neon': '0 0 12px theme("colors.primary-light"), 0 0 24px theme("colors.primary-glow")',
                        'neon-secondary': '0 0 12px theme("colors.secondary-light"), 0 0 24px theme("colors.secondary-glow")',
                        'neon-tertiary': '0 0 12px theme("colors.tertiary-light"), 0 0 24px theme("colors.tertiary-glow")',
                        'neon-accent': '0 0 12px theme("colors.accent-light"), 0 0 24px theme("colors.accent-glow")',
                        'glass': '0 8px 32px 0 rgba(0, 0, 0, 0.3)',
                    },
                },
            },
        }
    </script>
    <!-- Chart.js for graphs -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <!-- Add these animation libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

        <link rel="stylesheet" href="styles.css">

        <!-- Template utilities + layout helpers -->
        <style type="text/tailwindcss">
                .lofi-grain::before {
                        content: "";
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        pointer-events: none;
                        background-image: url(https://lh3.googleusercontent.com/aida-public/AB6AXuARpXRE6nFkdwsrDHloB_iGSclUv0T8vVurBS43ClFFBQiRb2DjQdmb9rd6eatR5vrWEN0BmB0wtyh2in3x2otJAT6zml8FxALBNusemkCV7h-CGgjZCkvU12pXGk6G1uzbszuKc4darGok3v8f8b6nJpxGhqmoqRUJwQWyUuf5rBQyQ-YYgHqGyW9i5WFW_rEyHwcQHij2aKlyhVkcUZpvm0VfUqtJep9X6Nw1uOaeBcdUZuD0UnUgMGDkVBOv3qQb_qCbeO1pfyLr);
                        z-index: 0;
                        opacity: 0.08;
                        mix-blend-mode: overlay;
                }

                .glass-panel {
                        background: theme('colors.glass-bg');
                        backdrop-filter: blur(18px);
                        -webkit-backdrop-filter: blur(18px);
                        border: 1px solid theme('colors.glass-border');
                        box-shadow: 0 4px 30px rgba(0, 0, 0, 0.2);
                }

                .glass-panel:hover {
                        background: rgba(30, 41, 59, 0.5);
                        border: 1px solid rgba(71, 85, 105, 0.8);
                        box-shadow: 0 0 15px theme('colors.primary-glow');
                }

                ::-webkit-scrollbar {
                        width: 8px;
                }

                ::-webkit-scrollbar-track {
                        background: theme('colors.background-dark');
                }

                ::-webkit-scrollbar-thumb {
                        background: theme('colors.primary');
                        border-radius: 4px;
                }

                ::-webkit-scrollbar-thumb:hover {
                        background: theme('colors.primary-light');
                }

                .desktop-grid {
                        display: grid;
                        grid-template-columns: 1fr;
                        gap: 1rem;
                }

                @media (min-width: 768px) {
                        .desktop-grid {
                                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                                gap: 1.5rem;
                                grid-auto-flow: dense;
                        }

                        .card-large {
                                grid-column: span 2;
                        }

                        .card-tall {
                                grid-row: span 2;
                        }
                }

                @media (min-width: 1280px) {
                        .desktop-grid {
                                grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
                        }
                }

                @media (min-width: 1536px) {
                        .desktop-grid {
                                grid-template-columns: repeat(4, 1fr);
                        }
                }
        </style>
</head>
<body class="font-display bg-background-light text-text-default transition-colors duration-300 lofi-grain min-h-screen flex flex-col selection:bg-primary selection:text-white pb-24 relative overflow-x-hidden">

        <!-- Ambient Glow Effects (Template) -->
        <div class="fixed top-[-5%] left-[-5%] w-[30%] h-[30%] rounded-full bg-primary/20 blur-[100px] pointer-events-none z-[-1]"></div>
        <div class="fixed bottom-[15%] right-[-5%] w-[25%] h-[25%] rounded-full bg-secondary/20 blur-[90px] pointer-events-none z-[-1]"></div>
        <div class="fixed top-[45%] left-[10%] w-[20%] h-[20%] rounded-full bg-tertiary/15 blur-[70px] pointer-events-none z-[-1]"></div>
        <div class="fixed top-[20%] right-[5%] w-[25%] h-[25%] rounded-full bg-accent/15 blur-[80px] pointer-events-none z-[-1]"></div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center">
        <div class="loading-animation h-16 w-16 rounded-full border-4 border-gray-300"></div>
    </div>

    <!-- Header (Template look, existing IDs preserved) -->
    <header class="sticky top-4 z-50 mx-auto w-[95%] max-w-7xl bg-background-light/80 backdrop-blur-xl border border-white/10 rounded-full px-4 py-2 shadow-lg transition-all duration-300">
        <div class="flex items-center justify-between gap-4">
            <div class="flex items-center gap-4">
                <!-- Avatar with XP Ring -->
                <div class="relative flex items-center justify-center" id="user-profile">
                    <!-- SVG Ring -->
                    <svg class="absolute w-14 h-14 -rotate-90 pointer-events-none" viewBox="0 0 36 36">
                        <!-- Background Ring -->
                        <path class="text-gray-700/30" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="currentColor" stroke-width="3" />
                        <!-- Progress Ring -->
                        <path id="xp-ring-circle" class="text-primary transition-all duration-1000 ease-out drop-shadow-[0_0_4px_rgba(139,92,246,0.5)]" stroke-dasharray="100, 100" stroke-dashoffset="100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" />
                    </svg>
                    
                    <img
                        id="user-avatar"
                        src="https://ui-avatars.com/api/?name=Guest&background=667eea&color=fff&size=128"
                        alt="Profile"
                        class="w-10 h-10 rounded-full border-2 border-secondary hover:shadow-neon-secondary overflow-hidden relative bg-background-light/50 cursor-pointer z-10 transition-all duration-300"
                    >
                    <!-- Hidden user name for JS compatibility -->
                    <h2 id="user-name" class="hidden">Guest User</h2>
                </div>
                
                <!-- Level & XP Text (Compact) -->
                <div class="flex flex-col justify-center">
                    <span id="user-level" class="text-[10px] text-secondary uppercase tracking-widest font-mono font-bold leading-tight">LEVEL 1</span>
                    <span id="xp-text" class="text-xs text-text-muted font-medium leading-tight">0/100 XP</span>
                </div>
                <!-- Hidden linear bar for JS compatibility -->
                <div id="xp-bar" class="hidden"></div>
            </div>

            <div class="flex items-center gap-2 md:gap-3">
                 <!-- Cloud Sync Button (Hidden by default) -->
                <button id="cloud-sync-btn" class="hidden p-2 md:px-4 md:py-2 rounded-full text-xs font-bold bg-primary/20 text-primary border border-primary/30 hover:bg-primary hover:text-white hover:shadow-neon transition-all hover:scale-105 inline-flex items-center gap-2 backdrop-blur-sm" type="button">
                    <span class="material-symbols-outlined text-lg md:text-sm">cloud_off</span>
                    <span class="hidden md:inline">Connect Cloud</span>
                </button>

                <button id="install-app-btn" class="hidden w-10 h-10 md:w-auto md:h-auto md:px-4 md:py-2 rounded-full text-xs font-bold bg-tertiary/20 text-tertiary border border-tertiary/30 hover:bg-tertiary hover:text-white hover:shadow-neon-tertiary transition-all hover:scale-105 flex items-center justify-center gap-2 backdrop-blur-sm" type="button">
                    <span class="material-symbols-outlined text-lg md:text-sm">download</span>
                    <span class="hidden md:inline">Install App</span>
                </button>

                <button id="dark-mode-toggle" class="w-10 h-10 md:w-auto md:h-auto md:px-4 md:py-2 rounded-full text-xs font-bold bg-accent text-slate-900 hover:shadow-neon-accent transition-all hover:scale-105 flex items-center justify-center gap-2 no-underline hover:no-underline border border-accent/50" type="button">
                    <svg id="theme-icon-sun" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>
                    <svg id="theme-icon-moon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>
                    <span id="theme-text" class="hidden md:inline">NIGHT</span>
                </button>
                <button id="insomnia-toggle" class="w-10 h-10 md:w-auto md:h-auto md:px-4 md:py-2 rounded-full text-xs font-bold bg-white/10 text-text-muted border border-white/20 hover:border-primary hover:text-primary hover:shadow-neon transition-all hover:scale-105 flex items-center justify-center gap-2 no-underline hover:no-underline backdrop-blur-sm" type="button" title="Insomnia Mode (Keep Screen On)">
                    <span class="material-symbols-outlined text-lg md:text-sm">visibility</span>
                    <span class="hidden md:inline">INSOMNIA</span>
                </button>
                <button id="settings-btn" class="size-10 flex items-center justify-center rounded-full bg-white/30 border border-white/50 hover:border-secondary hover:text-secondary hover:shadow-neon-secondary transition-all group backdrop-blur-sm no-underline hover:no-underline" type="button" aria-label="Settings">
                    <span class="material-symbols-outlined text-text-muted group-hover:text-secondary transition-colors">settings</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div id="app-container" class="max-w-7xl mx-auto p-4 md:p-6 lg:p-8 relative w-full mt-4">

        <!-- Main Content Area -->
        <main id="main-content" class="flex-grow">
            <!-- Dashboard View -->
            <div id="dashboard-view" class="view space-y-6">
                <!-- Greeting Section -->
                <div id="dashboard-greeting" class="mb-2 animate-fade-in-up">
                    <h1 class="text-2xl md:text-3xl font-bold text-text-default"><span id="greeting-text">Hello</span>, <span id="greeting-user" class="text-primary">User</span>! üëã</h1>
                    <p class="text-text-muted text-sm">Let's make today productive.</p>
                </div>

                <div class="desktop-grid gap-6">
                    <!-- System Status / Daily Check-in -->
                    <div class="group glass-panel rounded-3xl p-6 flex flex-col gap-6 relative overflow-hidden transition-all duration-300">
                        <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-primary/10 to-transparent rounded-bl-full pointer-events-none blur-xl"></div>
                        <div class="flex justify-between items-start z-10">
                            <div>
                                <h3 class="text-text-default text-2xl font-bold tracking-tight">System Status</h3>
                                <p class="text-text-muted text-sm">Daily Check-in</p>
                            </div>
                            <span class="material-symbols-outlined text-primary group-hover:text-text-default transition-colors p-3 bg-primary/10 rounded-full">medical_services</span>
                        </div>
                        <div class="space-y-4 z-10">
                            <p class="text-xs uppercase tracking-widest text-text-muted font-medium">Mood</p>
                            <div id="mood-tracker" class="flex gap-4">
                                <button data-mood="sad" class="mood-btn flex-1 py-5 bg-white/10 border border-glass-border rounded-2xl hover:border-danger hover:bg-danger/20 transition-all group backdrop-blur-sm" type="button" aria-label="Mood: sad">
                                    <span class="material-symbols-outlined text-text-muted group-hover:text-danger text-4xl">sentiment_dissatisfied</span>
                                </button>
                                <button data-mood="neutral" class="mood-btn flex-1 py-5 bg-white/10 border border-glass-border rounded-2xl hover:border-accent hover:bg-accent/20 transition-all group backdrop-blur-sm" type="button" aria-label="Mood: neutral">
                                    <span class="material-symbols-outlined text-text-muted group-hover:text-accent text-4xl">sentiment_neutral</span>
                                </button>
                                <button data-mood="happy" class="mood-btn flex-1 py-5 bg-tertiary/15 border border-tertiary/60 rounded-2xl shadow-neon-tertiary transition-all backdrop-blur-sm" type="button" aria-label="Mood: happy">
                                    <span class="material-symbols-outlined text-tertiary text-4xl">sentiment_satisfied</span>
                                </button>
                            </div>
                        </div>
                        <div class="space-y-4 z-10">
                            <p class="text-xs uppercase tracking-widest text-text-muted font-medium">Stress Load</p>
                            <div id="stress-tracker" class="flex bg-white/10 p-2 rounded-2xl border border-glass-border backdrop-blur-sm">
                                <button data-stress="low" class="stress-btn flex-1 text-center text-sm py-3 rounded-xl text-text-muted hover:bg-white/10 transition-all" type="button">Low</button>
                                <button data-stress="medium" class="stress-btn flex-1 text-center text-sm py-3 rounded-xl text-text-muted hover:bg-white/10 transition-all" type="button">Mid</button>
                                <button data-stress="high" class="stress-btn flex-1 text-center text-sm py-3 rounded-xl text-text-muted hover:bg-white/10 transition-all" type="button">High</button>
                            </div>
                        </div>
                    </div>

                    <!-- Recharge Cycle / Sleep -->
                    <div class="glass-panel rounded-3xl p-6 flex flex-col gap-6 transition-all duration-300 group hover:shadow-neon-secondary">
                        <div class="flex justify-between items-start">
                            <div>
                                <h3 class="text-text-default text-2xl font-bold tracking-tight">Recharge Cycle</h3>
                                <p class="text-text-muted text-sm">Sleep Tracker</p>
                            </div>
                            <span class="material-symbols-outlined text-secondary p-3 bg-secondary/10 rounded-full">bedtime</span>
                        </div>
                        <div class="flex flex-col gap-3 mt-2">
                            <label class="text-xs uppercase text-text-muted font-bold pl-1" for="sleep-hours">Last Night's Sleep (Hours)</label>
                            <div class="flex items-center gap-4">
                                <input id="sleep-hours" class="flex-1 bg-white/10 border border-glass-border rounded-xl px-4 py-4 text-text-default font-mono focus:border-secondary focus:ring-1 focus:ring-secondary outline-none shadow-inner text-2xl text-center" type="number" step="0.5" min="0" max="24" placeholder="8.0">
                                <span class="text-text-muted text-lg font-medium">hrs</span>
                            </div>
                        </div>
                        <div class="flex flex-col gap-3 mt-auto pt-4">
                            <button id="save-sleep-btn" class="w-full py-4 rounded-xl bg-secondary text-white text-base font-bold shadow-neon-secondary hover:bg-secondary/90 transition-all" type="button">
                                Save Sleep Data
                            </button>
                            <button id="calc-sleep-cycle-btn" class="w-full py-4 rounded-xl border border-glass-border bg-white/10 text-text-muted text-base font-medium hover:text-secondary hover:border-secondary transition-colors backdrop-blur-sm" type="button">
                                Calculate Sleep
                            </button>
                        </div>
                    </div>

                    <!-- Sync Status / Daily Progress -->
                    <div class="glass-panel rounded-3xl p-6 flex flex-col items-center justify-center gap-6 transition-all duration-300 min-h-[300px] relative hover:shadow-neon overflow-hidden">
                        <div class="absolute top-5 left-6">
                            <h3 class="text-text-default text-xl font-bold tracking-tight">Sync Status</h3>
                        </div>
                        <div class="relative size-56 mt-4 flex items-center justify-center">
                            <div class="absolute size-32 bg-primary/20 blur-3xl rounded-full"></div>
                            <svg class="size-full -rotate-90 relative z-10" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">
                                <path class="text-white/60 stroke-current" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke-width="2.5"></path>
                                <path id="daily-progress-circle" class="text-primary stroke-current drop-shadow-[0_0_8px_rgba(139,92,246,0.5)]" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke-linecap="round" stroke-width="2.5"></path>
                            </svg>
                            <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center z-20">
                                <span id="daily-progress-text" class="text-5xl font-bold text-text-default drop-shadow-lg font-mono">0%</span>
                                <span class="text-xs uppercase text-primary tracking-widest font-bold">Complete</span>
                            </div>
                        </div>
                        <p id="sync-status-text" class="text-text-muted text-sm text-center max-w-[80%] mt-2 bg-white/10 py-2 px-4 rounded-full">Daily protocols synchronization in progress.</p>
                    </div>

                    <!-- Credits / Pocket Money -->
                    <div class="glass-panel rounded-3xl p-6 flex flex-col gap-6 transition-all duration-300 group hover:shadow-neon-accent">
                        <div class="flex justify-between items-start">
                            <div>
                                <h3 class="text-text-default text-2xl font-bold tracking-tight">Credits</h3>
                                <p class="text-text-muted text-sm">Expenses</p>
                            </div>
                            <div class="flex gap-2">
                                <button id="edit-limit-btn" class="text-primary p-3 bg-primary/10 rounded-full hover:bg-primary/20 transition-colors" type="button" aria-label="Edit Limit" title="Edit Limit">
                                    <span class="material-symbols-outlined">edit</span>
                                </button>
                                <button id="finance-history-btn" class="text-accent p-3 bg-accent/10 rounded-full hover:bg-accent/20 transition-colors" type="button" aria-label="Expense history">
                                    <span class="material-symbols-outlined">history</span>
                                </button>
                            </div>
                        </div>
                        <div class="flex flex-col items-center gap-2 my-2 bg-white/10 p-5 rounded-2xl border border-glass-border">
                            <div class="flex items-baseline gap-2">
                                <span id="monthly-spend" class="text-5xl font-bold text-text-default font-mono drop-shadow-[0_0_8px_rgba(250,204,21,0.2)]">‚Çπ0</span>
                            </div>
                            <div class="text-xs text-text-muted">
                                spent this month (Limit: ‚Çπ<span id="monthly-limit">2000</span>)
                            </div>
                            <div class="w-full bg-white/10 rounded-full h-2.5 mt-2 border border-glass-border overflow-hidden">
                                <div id="spend-bar" class="bg-tertiary h-2.5 rounded-full" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="grid grid-cols-3 gap-3 mt-auto pt-4">
                            <button class="expense-btn flex flex-col items-center justify-center gap-1 py-3 px-2 bg-white/10 border border-glass-border rounded-xl hover:border-accent hover:text-accent text-text-muted text-sm font-medium transition-all backdrop-blur-sm hover:bg-accent/10" data-cat="Food" type="button">
                                <span class="material-symbols-outlined text-2xl">restaurant</span>
                                <span class="text-xs">Food</span>
                            </button>
                            <button class="expense-btn flex flex-col items-center justify-center gap-1 py-3 px-2 bg-white/10 border border-glass-border rounded-xl hover:border-accent hover:text-accent text-text-muted text-sm font-medium transition-all backdrop-blur-sm hover:bg-accent/10" data-cat="Travel" type="button">
                                <span class="material-symbols-outlined text-2xl">train</span>
                                <span class="text-xs">Travel</span>
                            </button>
                            <button class="expense-btn flex flex-col items-center justify-center gap-1 py-3 px-2 bg-white/10 border border-glass-border rounded-xl hover:border-accent hover:text-accent text-text-muted text-sm font-medium transition-all backdrop-blur-sm hover:bg-accent/10" data-cat="Other" type="button">
                                <span class="material-symbols-outlined text-2xl">grid_view</span>
                                <span class="text-xs">Other</span>
                            </button>
                        </div>
                    </div>

                    <!-- Protocols / Habits -->
                    <div class="glass-panel rounded-3xl p-6 flex flex-col gap-6 transition-all duration-300 hover:shadow-neon-tertiary card-large">
                        <div class="flex justify-between items-center border-b border-glass-border pb-4 mb-2">
                            <div>
                                <h3 class="text-text-default text-2xl font-bold tracking-tight">Protocols</h3>
                                <p class="text-text-muted text-sm">Today's Habits</p>
                            </div>
                            <button id="add-habit-btn" class="text-tertiary hover:text-text-default transition-colors bg-tertiary/10 p-3 rounded-full hover:bg-tertiary/20" type="button" aria-label="Add habit">
                                <span class="material-symbols-outlined">add</span>
                            </button>
                        </div>
                        <div id="habits-list" class="space-y-3 max-h-[40vh] overflow-y-auto pr-2"></div>
                        <div id="empty-habits-message" class="text-center py-8 text-text-muted"><p>No habits for today. Add one to get started!</p></div>
                    </div>

                    <!-- Inspirational Quote (IDs preserved for existing quote script) -->
                    <section id="motivational-quotes" class="glass-panel rounded-3xl p-8 flex flex-col justify-center gap-4 transition-all duration-300 relative overflow-hidden group hover:shadow-neon card-large">
                        <div class="absolute inset-0 opacity-5 pointer-events-none" style="background-image: repeating-linear-gradient(45deg, #8b5cf6 0, #8b5cf6 1px, transparent 0, transparent 50%); background-size: 10px 10px;"></div>
                        <div class="absolute inset-0 bg-gradient-to-t from-background-light/80 to-transparent"></div>
                        <div class="flex items-center gap-2 mb-2 z-10">
                            <span class="h-2.5 w-2.5 rounded-full bg-primary animate-pulse shadow-neon"></span>
                            <span class="text-xs uppercase text-primary font-bold tracking-widest drop-shadow-md">Data Log</span>
                        </div>
                        <blockquote id="quoteText" class="text-xl md:text-2xl text-text-default font-mono leading-relaxed z-10 relative italic aria-live="polite">Loading inspiration‚Ä¶</blockquote>
                        <div class="flex items-center justify-between z-10">
                            <span id="quoteAuthor" class="text-sm text-text-muted"></span>
                            <button id="quoteRefresh" class="text-sm text-text-muted hover:text-text-default flex items-center gap-2 py-2.5 px-4 rounded-full hover:bg-white/10 transition-all" type="button">
                                <span class="material-symbols-outlined text-sm text-secondary">refresh</span> New quote
                            </button>
                        </div>
                    </section>
                </div>
            </div>

            <!-- Study Zone View -->
            <div id="study-view" class="view hidden space-y-6">
                <div class="desktop-grid gap-6">
                <!-- Focus Ambiance -->
                <div class="glass-panel rounded-3xl p-6 lg:col-span-2 flex flex-col md:flex-row items-center justify-between gap-4 transition-all duration-300 hover:shadow-neon">
                    <div class="flex items-center gap-3">
                        <div class="text-3xl">üéß</div>
                        <div>
                            <h2 class="text-xl font-bold text-text-default">Focus Ambiance</h2>
                            <p class="text-sm text-text-muted">Block out distractions with pure noise.</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-4">
                        <button class="ambiance-btn px-4 py-2 rounded-xl border border-glass-border bg-white/10 hover:bg-secondary/20 hover:border-secondary text-text-muted hover:text-secondary transition-all backdrop-blur-sm" data-sound="brown" type="button">üü§ Brown Noise</button>
                        <button class="ambiance-btn px-4 py-2 rounded-xl border border-glass-border bg-white/10 hover:bg-secondary/20 hover:border-secondary text-text-muted hover:text-secondary transition-all backdrop-blur-sm" data-sound="rain" type="button">üåßÔ∏è Rain</button>
                        <button id="stop-ambiance-btn" class="px-4 py-2 rounded-xl text-white bg-danger shadow-neon hover:bg-danger/90 transition-all hidden" type="button">Stop</button>
                    </div>
                </div>

                <!-- Sticky Notes -->
                <div class="glass-panel rounded-3xl p-6 transition-all duration-300 hover:shadow-neon-accent" id="sticky-notes-section">
                  <h2 class="text-xl font-bold text-text-default mb-4">Sticky Notes</h2>
                  <div id="sticky-notes-list" class="space-y-2 mb-4 max-h-48 overflow-y-auto"></div>
                  <div class="flex gap-2 mt-3">
                    <input type="text" id="sticky-note-input" class="flex-1 p-3 rounded-xl border border-glass-border bg-white/10 text-text-default placeholder-text-muted focus:border-accent focus:ring-1 focus:ring-accent outline-none" placeholder="Type your note..." />
                    <button id="add-sticky-note-btn" class="px-5 py-3 rounded-xl text-white bg-accent shadow-neon-accent hover:bg-accent/90 transition-all font-semibold" type="button">Add</button>
                  </div>
                </div>

                <!-- Pomodoro Timer -->
                <div class="lg:col-span-2 glass-panel rounded-3xl p-6 md:p-8 flex flex-col items-center justify-center transition-all duration-300 hover:shadow-neon">
                    <h2 class="text-2xl font-bold text-text-default mb-6">Pomodoro Timer</h2>
                    <div class="flex flex-wrap gap-2 mb-6 justify-center">
                        <button id="pomodoro-work-btn" data-mode="work" class="pomodoro-btn px-4 py-2 rounded-xl border border-glass-border bg-white/10 hover:bg-primary/20 hover:border-primary text-text-muted hover:text-primary transition-all" type="button">Work (25 min)</button>
                        <button id="pomodoro-short-break-btn" data-mode="shortBreak" class="pomodoro-btn px-4 py-2 rounded-xl border border-glass-border bg-white/10 hover:bg-secondary/20 hover:border-secondary text-text-muted hover:text-secondary transition-all" type="button">Short Break (5 min)</button>
                        <button id="pomodoro-long-break-btn" data-mode="longBreak" class="pomodoro-btn px-4 py-2 rounded-xl border border-glass-border bg-white/10 hover:bg-tertiary/20 hover:border-tertiary text-text-muted hover:text-tertiary transition-all" type="button">Long Break (15 min)</button>
                    </div>
                    <div id="focus-garden" class="relative w-64 h-64 mx-auto mb-6 flex items-center justify-center">
                        <canvas id="plant-canvas" width="256" height="256" class="absolute inset-0 w-full h-full"></canvas>
                        <div id="pomodoro-timer" class="text-5xl md:text-6xl font-bold drop-shadow-lg z-10 bg-white/20 px-6 py-3 rounded-2xl backdrop-blur-md text-text-default">25:00</div>
                    </div>
                    <div class="flex flex-wrap gap-4 justify-center items-center">
                        <button id="pomodoro-start-btn" class="text-white font-bold py-3 px-8 rounded-xl text-lg bg-primary shadow-neon hover:bg-primary/90 transition-all" type="button">Start</button>
                        <button id="pomodoro-reset-btn" class="font-bold py-3 px-8 rounded-xl text-lg text-text-muted hover:text-secondary border border-glass-border bg-white/10 hover:bg-white/20 transition-all" type="button">Reset</button>
                        <span id="pomodoro-cycles" class="font-bold py-3 px-6 rounded-xl text-lg text-secondary bg-white/10 border border-glass-border">
                          Cycles: 0/4
                        </span>
                      </div>
                </div>

                <!-- Assignment Tracker -->
                <div class="glass-panel rounded-3xl p-6 transition-all duration-300 hover:shadow-neon-tertiary">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-bold text-text-default">Assignments</h2>
                        <button id="add-assignment-btn" class="flex items-center justify-center w-10 h-10 rounded-full bg-tertiary shadow-neon-tertiary hover:bg-tertiary/90 text-white transition-all" type="button" aria-label="Add assignment">+</button>
                    </div>
                    <div id="assignment-list" class="space-y-3 max-h-[50vh] overflow-y-auto"></div>
                    <div id="empty-assignments-message" class="text-center py-8 text-text-muted"><p>No upcoming assignments. Great job!</p></div>
                </div>
                <!-- Attendance Calculator (Bunk-o-Meter) -->
                <div class="glass-panel rounded-3xl p-6 transition-all duration-300 hover:shadow-neon" id="attendance-calculator-section">
                  <h2 class="text-xl font-bold text-text-default mb-4">Bunk-o-Meter üìâ</h2>
                  <div class="space-y-4">
                    <div>
                        <label class="text-sm font-medium text-text-muted mb-2 block">Total Classes Held</label>
                        <input type="number" id="total-classes" class="w-full p-3 rounded-xl border border-glass-border bg-white/10 text-text-default placeholder-text-muted focus:border-primary focus:ring-1 focus:ring-primary outline-none" placeholder="e.g. 40">
                    </div>
                    <div>
                        <label class="text-sm font-medium text-text-muted mb-2 block">Classes Attended</label>
                        <input type="number" id="attended-classes" class="w-full p-3 rounded-xl border border-glass-border bg-white/10 text-text-default placeholder-text-muted focus:border-primary focus:ring-1 focus:ring-primary outline-none" placeholder="e.g. 32">
                    </div>
                    <button id="calc-attendance-btn" class="w-full py-3 rounded-xl font-bold text-white bg-primary shadow-neon hover:bg-primary/90 transition-all" type="button">Check Safety</button>
                    <div id="attendance-result" class="hidden p-4 rounded-xl bg-white/10 border border-glass-border text-sm font-medium text-center text-text-default"></div>
                  </div>
                </div>

                <!-- Standard Calculator -->
                <div class="glass-panel rounded-3xl p-6 transition-all duration-300 hover:shadow-neon-accent" id="calculator-section">
                  <h2 class="text-xl font-bold text-text-default mb-4">Calculator üßÆ</h2>
                  <input type="text" id="calc-display" class="w-full text-right p-4 rounded-xl border border-glass-border mb-4 text-2xl bg-black/50 text-white font-mono backdrop-blur-sm" readonly placeholder="0">
                  <div id="calc-buttons" class="grid grid-cols-4 gap-2">
                    <button class="calc-btn px-4 py-3 bg-white/10 border border-glass-border rounded-xl hover:bg-white/20 text-text-default font-semibold transition-all" data-val="7" type="button">7</button>
                    <button class="calc-btn px-4 py-3 bg-white/10 border border-glass-border rounded-xl hover:bg-white/20 text-text-default font-semibold transition-all" data-val="8" type="button">8</button>
                    <button class="calc-btn px-4 py-3 bg-white/10 border border-glass-border rounded-xl hover:bg-white/20 text-text-default font-semibold transition-all" data-val="9" type="button">9</button>
                    <button class="calc-btn calc-op px-4 py-3 bg-accent/20 border border-accent/50 rounded-xl hover:bg-accent/30 text-accent font-bold transition-all" data-val="/" type="button">√∑</button>
                    <button class="calc-btn px-4 py-3 bg-white/10 border border-glass-border rounded-xl hover:bg-white/20 text-text-default font-semibold transition-all" data-val="4" type="button">4</button>
                    <button class="calc-btn px-4 py-3 bg-white/10 border border-glass-border rounded-xl hover:bg-white/20 text-text-default font-semibold transition-all" data-val="5" type="button">5</button>
                    <button class="calc-btn px-4 py-3 bg-white/10 border border-glass-border rounded-xl hover:bg-white/20 text-text-default font-semibold transition-all" data-val="6" type="button">6</button>
                    <button class="calc-btn calc-op px-4 py-3 bg-accent/20 border border-accent/50 rounded-xl hover:bg-accent/30 text-accent font-bold transition-all" data-val="*" type="button">√ó</button>
                    <button class="calc-btn px-4 py-3 bg-white/10 border border-glass-border rounded-xl hover:bg-white/20 text-text-default font-semibold transition-all" data-val="1" type="button">1</button>
                    <button class="calc-btn px-4 py-3 bg-white/10 border border-glass-border rounded-xl hover:bg-white/20 text-text-default font-semibold transition-all" data-val="2" type="button">2</button>
                    <button class="calc-btn px-4 py-3 bg-white/10 border border-glass-border rounded-xl hover:bg-white/20 text-text-default font-semibold transition-all" data-val="3" type="button">3</button>
                    <button class="calc-btn calc-op px-4 py-3 bg-accent/20 border border-accent/50 rounded-xl hover:bg-accent/30 text-accent font-bold transition-all" data-val="-" type="button">‚àí</button>
                    <button class="calc-btn px-4 py-3 bg-white/10 border border-glass-border rounded-xl hover:bg-white/20 text-text-default font-semibold transition-all" data-val="0" type="button">0</button>
                    <button class="calc-btn px-4 py-3 bg-white/10 border border-glass-border rounded-xl hover:bg-white/20 text-text-default font-semibold transition-all" data-val="." type="button">.</button>
                    <button class="calc-btn px-4 py-3 bg-white/10 border border-glass-border rounded-xl hover:bg-white/20 text-text-default font-semibold transition-all" id="calc-del" type="button">D</button>
                    <button class="calc-btn calc-op px-4 py-3 bg-accent/20 border border-accent/50 rounded-xl hover:bg-accent/30 text-accent font-bold transition-all" data-val="+" type="button">+</button>
                    <button class="calc-btn px-4 py-3 bg-danger/20 border border-danger/50 rounded-xl hover:bg-danger/30 text-danger font-bold transition-all col-span-2" id="calc-clear" type="button">C</button>
                    <button class="calc-btn col-span-2 px-4 py-3 bg-primary/20 border border-primary/50 rounded-xl hover:bg-primary/30 text-primary font-bold transition-all shadow-neon" id="calc-equals" type="button">=</button>
                  </div>
                </div>
                </div>
              </div>

            
            <!-- Analytics View -->
            <div id="analytics-view" class="view hidden space-y-6">
                 <div class="glass-panel rounded-3xl p-6 md:p-8 transition-all duration-300 hover:shadow-neon">
                    <h2 class="text-2xl font-bold text-text-default mb-2">Academic & Wellness Correlation</h2>
                    <p class="text-sm text-text-muted mb-6">Track how your habits, mood, and sleep impact your academic performance. Log your grades to see the trends.</p>
                     <div class="flex items-center justify-between mb-6 flex-wrap gap-4">
                        <div class="flex items-center gap-2">
                            <label for="gpa-target-input" class="text-sm font-medium text-text-muted">Target GPA:</label>
                            <input type="number" id="gpa-target-input" step="0.1" min="0" max="5" class="w-20 p-2 rounded-xl border border-glass-border bg-white/10 text-text-default focus:border-primary focus:ring-1 focus:ring-primary outline-none">
                        </div>
                        <button id="add-grade-btn" class="px-5 py-2 rounded-xl text-sm font-semibold bg-primary text-white shadow-neon hover:bg-primary/90 transition-all" type="button">Log a Grade</button>
                    </div>
                    <div id="analytics-info-message" class="text-center text-sm text-secondary pb-2" style="display: none;"></div>
                    <div class="bg-white/5 rounded-2xl p-4 border border-glass-border overflow-hidden">
                      <canvas id="correlation-chart" class="w-full h-80"></canvas>
                    </div>
                    
                    <!-- New Insight-Driven Analytics -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                        <!-- Academic Radar -->
                        <div class="glass-panel rounded-3xl p-6 transition-all duration-300 hover:shadow-neon-secondary">
                            <h3 class="text-xl font-bold text-text-default mb-2 flex items-center gap-2">
                                üï∏Ô∏è Academic Radar
                                <span class="text-xs font-normal px-3 py-1 rounded-full bg-secondary/20 text-secondary border border-secondary/50">Subject Weakness</span>
                            </h3>
                            <div class="relative h-64 w-full flex items-center justify-center overflow-hidden">
                                <canvas id="academic-radar-chart"></canvas>
                                <div id="radar-empty-state" class="absolute inset-0 flex items-center justify-center text-sm text-text-muted hidden">
                                    Log grades with subjects to see data
                                </div>
                            </div>
                        </div>

                        <!-- Burnout Meter -->
                        <div class="glass-panel rounded-3xl p-6 transition-all duration-300 hover:shadow-neon">
                            <h3 class="text-xl font-bold text-text-default mb-2 flex items-center gap-2">
                                üîã Burnout Meter
                                <span class="text-xs font-normal px-3 py-1 rounded-full bg-danger/20 text-danger border border-danger/50">Predictive Health</span>
                            </h3>
                            <div class="flex flex-col items-center justify-center h-64">
                                <div class="relative w-24 h-40 border-4 border-gray-400 rounded-xl p-1 mb-4 bg-gray-100 dark:bg-gray-800 overflow-hidden">
                                    <!-- Battery Cap -->
                                    <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 w-10 h-3 bg-gray-400 rounded-t-sm"></div>
                                    <!-- Liquid -->
                                    <div id="burnout-liquid" class="w-full rounded-lg absolute bottom-1 left-1 right-1 transition-all duration-700 ease-out z-0" style="height: 0%"></div>
                                    <!-- Percentage Text -->
                                    <div class="absolute inset-0 flex items-center justify-center font-bold text-xl z-10 mix-blend-difference text-white pointer-events-none">
                                        <span id="burnout-percentage">--%</span>
                                    </div>
                                </div>
                                <div id="burnout-status" class="text-center font-semibold text-lg">Calculating...</div>
                                <p id="burnout-advice" class="text-xs text-center text-gray-500 mt-2 px-4">Log sleep and stress to get insights.</p>
                            </div>
                        </div>
                    </div>

                    <!-- CGPA Simulator -->
                    <div class="glass-panel rounded-3xl p-6 mt-6 transition-all duration-300 hover:shadow-neon-tertiary">
                        <h3 class="text-xl font-bold text-text-default mb-4 flex items-center gap-2">
                            üéì CGPA Simulator
                            <span class="text-xs font-normal px-3 py-1 rounded-full bg-tertiary/20 text-tertiary border border-tertiary/50">What-If Calculator</span>
                        </h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <!-- Left: Controls -->
                            <div class="md:col-span-2 space-y-4">
                                <!-- Previous Semester Data -->
                                <div class="flex flex-col sm:flex-row gap-4 mb-4 p-3 bg-white/5 rounded-xl border border-glass-border">
                                    <div class="flex-1">
                                        <label class="text-xs text-text-muted block mb-1">Prev. Sem CGPA</label>
                                        <input type="number" id="prev-cgpa-input" step="0.01" min="0" max="10" placeholder="0.00" class="w-full bg-transparent border-b border-glass-border text-text-default focus:border-primary outline-none text-sm py-1" onchange="window.calculateCGPA()">
                                    </div>
                                    <div class="flex-1">
                                        <label class="text-xs text-text-muted block mb-1">Prev. Sem Credits</label>
                                        <input type="number" id="prev-credits-input" min="0" placeholder="0" class="w-full bg-transparent border-b border-glass-border text-text-default focus:border-primary outline-none text-sm py-1" onchange="window.calculateCGPA()">
                                    </div>
                                </div>

                                <div class="flex justify-between text-xs text-gray-500 px-2">
                                    <span class="w-1/3">Subject</span>
                                    <span class="w-16 text-center">Credits</span>
                                    <span class="flex-1 text-center">Expected Marks</span>
                                </div>
                                <div id="cgpa-subjects-list" class="space-y-3 max-h-60 overflow-y-auto pr-2 custom-scrollbar">
                                    <!-- Dynamic Subject Rows will go here -->
                                </div>
                                <button id="add-cgpa-subject-btn" class="mt-3 px-4 py-2 bg-primary/20 border border-primary/50 rounded-xl hover:bg-primary/30 text-primary font-semibold transition-all flex items-center justify-center gap-2 hover:shadow-neon-primary w-full" type="button">
                                    <span class="material-symbols-outlined text-lg">add_circle</span>
                                    Add Subject
                                </button>
                            </div>

                            <!-- Right: Result -->
                            <div class="flex flex-col items-center justify-center bg-white/5 border border-glass-border rounded-2xl p-6 h-full min-h-[150px]">
                                <div class="text-sm text-text-muted mb-2">Projected CGPA</div>
                                <div id="projected-cgpa" class="text-5xl font-bold text-primary transition-all duration-300">0.00</div>
                                <div class="text-xs text-text-muted mt-3 text-center">Adjust sliders to see impact</div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="glass-panel rounded-3xl p-6 md:p-8 transition-all duration-300 hover:shadow-neon">
                    <h2 class="text-2xl font-bold text-text-default mb-4">Habit Deep Dive</h2>
                    <select id="habit-analytics-selector" class="w-full p-3 rounded-xl border border-glass-border bg-white/10 text-text-default mb-6 focus:border-primary focus:ring-1 focus:ring-primary outline-none"></select>
                    <div id="deep-dive-content" class="hidden space-y-6">
                         <div class="bg-white/5 border border-glass-border rounded-2xl p-4 overflow-hidden">
                            <h3 class="font-semibold text-text-default mb-3">Completion Trend</h3>
                            <div class="relative h-56 w-full">
                                <canvas id="trends-chart"></canvas>
                            </div>
                         </div>
                        <div class="bg-white/5 border border-glass-border rounded-2xl p-4 overflow-x-auto"><h3 class="font-semibold text-text-default mb-3">Activity Heatmap</h3><div id="heatmap-container" class="grid grid-cols-7 gap-1 text-xs min-w-[300px]"></div></div>
                    </div>
                </div>
            </div>

            <!-- Rewards View -->
            <div id="rewards-view" class="view hidden space-y-6">
                <div class="glass-panel rounded-3xl p-6 md:p-8 transition-all duration-300 hover:shadow-neon-tertiary">
                    <h2 class="text-2xl font-bold text-text-default mb-6">Achievements</h2>
                    <div id="achievements-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4"></div>
                </div>

                <!-- Donation Section -->
                <div class="glass-panel rounded-3xl p-6 md:p-8 text-center transition-all duration-300 hover:shadow-neon">
                    <div class="text-4xl mb-4">üíñ</div>
                    <h2 class="text-2xl font-bold text-text-default mb-3">Support Daily Dost</h2>
                    <p class="text-text-muted mb-8 text-sm max-w-2xl mx-auto">
                        If this app has helped you stay organized and productive, consider supporting its development! 
                        Your contribution helps me build new features and keep the servers running. 
                        Thank you for being an amazing part of our community!
                    </p>
                    
                    <div class="flex flex-col md:flex-row items-center justify-center gap-8 max-w-3xl mx-auto">
                        <!-- QR Code -->
                        <div class="bg-white p-4 rounded-2xl shadow-lg">
                            <div class="w-48 h-48 bg-gray-100 flex items-center justify-center text-gray-400 text-xs text-center border-2 border-dashed border-gray-300 rounded-xl overflow-hidden">
                                <!-- Replace src with your actual QR Code image URL -->
                                <img id="donation-qr-code" src="qrcode.png" alt="Donation QR Code" class="w-full h-full object-contain cursor-pointer hover:scale-105 transition-transform" onerror="this.parentElement.innerHTML='<span>QR Code<br>Not Found</span>'">
                            </div>
                        </div>

                        <!-- UPI Details -->
                        <div class="flex-1 max-w-md">
                            <p class="text-sm font-medium text-text-muted mb-3">Donate via UPI</p>
                            <div class="flex items-center gap-3 bg-white/10 p-4 rounded-xl border border-glass-border backdrop-blur-sm">
                                <code id="upi-id" class="flex-1 font-mono text-base md:text-lg select-all text-text-default break-all">8369932694@fam</code>
                                <button id="copy-upi-btn" class="p-2 text-text-muted hover:text-accent transition-colors shrink-0 rounded-lg hover:bg-white/5" title="Copy UPI ID" type="button">
                                    <span class="material-symbols-outlined text-lg">content_copy</span>
                                </button>
                            </div>
                            <p class="text-xs text-text-muted mt-3">Scan the QR code or copy the UPI ID to donate.</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Bottom Navigation (Floating Glass Bar) -->
    <div class="fixed bottom-6 left-1/2 -translate-x-1/2 z-50">
        <nav class="flex items-center gap-2 p-2 rounded-full border border-white/10 bg-background-dark/80 backdrop-blur-2xl shadow-2xl shadow-black/50 ring-1 ring-white/5" aria-label="Primary">
            
            <button id="tab-dashboard" class="tab-btn group relative flex items-center gap-2 px-5 py-3 rounded-full transition-all duration-300 bg-primary/20 text-primary shadow-[0_0_15px_rgba(139,92,246,0.3)] border border-primary/30" type="button">
                <span class="material-symbols-outlined text-xl group-hover:scale-110 transition-transform">home</span>
                <span class="hidden sm:inline text-sm font-medium">Home</span>
            </button>

            <button id="tab-study" class="tab-btn group relative flex items-center gap-2 px-5 py-3 rounded-full transition-all duration-300 text-text-muted hover:text-white hover:bg-white/5 border border-transparent" type="button">
                <span class="material-symbols-outlined text-xl group-hover:scale-110 transition-transform">school</span>
                <span class="hidden sm:inline text-sm font-medium">Study</span>
            </button>

            <button id="tab-analytics" class="tab-btn group relative flex items-center gap-2 px-5 py-3 rounded-full transition-all duration-300 text-text-muted hover:text-white hover:bg-white/5 border border-transparent" type="button">
                <span class="material-symbols-outlined text-xl group-hover:scale-110 transition-transform">analytics</span>
                <span class="hidden sm:inline text-sm font-medium">Stats</span>
            </button>

            <button id="tab-rewards" class="tab-btn group relative flex items-center gap-2 px-5 py-3 rounded-full transition-all duration-300 text-text-muted hover:text-white hover:bg-white/5 border border-transparent" type="button">
                <span class="material-symbols-outlined text-xl group-hover:scale-110 transition-transform">emoji_events</span>
                <span class="hidden sm:inline text-sm font-medium">Awards</span>
            </button>
        </nav>
    </div>

    <!-- Modal Container -->
    <div id="modal-container" class="modal-overlay hidden"></div>

    <!-- Login Modal -->
    <div id="login-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm hidden">
        <div class="glass-panel p-8 rounded-2xl max-w-md w-full text-center space-y-6 border border-primary/30 shadow-neon">
            <h2 class="text-3xl font-bold font-display text-transparent bg-clip-text bg-gradient-to-r from-primary-light to-secondary-light">
                Welcome to StudiOS
            </h2>
            <p class="text-text-muted">Your ultimate student habit & study tracker.</p>
            
            <div class="space-y-4">
                <button id="google-login-btn" class="w-full py-3 px-4 bg-white text-black font-bold rounded-xl flex items-center justify-center gap-3 hover:bg-gray-100 transition-all transform hover:scale-105">
                    <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" class="w-6 h-6" alt="Google">
                    Sign in with Google
                </button>
            </div>
        </div>
    </div>

    <!-- Install Guide Modal -->
    <div id="install-guide-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm hidden">
        <div class="glass-panel p-6 rounded-2xl max-w-2xl w-full border border-tertiary/30 shadow-neon-tertiary relative m-4">
            <button id="close-install-guide" class="absolute top-4 right-4 text-text-muted hover:text-white">
                <span class="material-symbols-outlined">close</span>
            </button>
            
            <h2 class="text-2xl font-bold mb-6 text-center text-tertiary-light">How to Install StudiOS</h2>
            
            <!-- Direct Install Button (Hidden if not supported) -->
            <div id="install-action-container" class="text-center mb-8 hidden">
                 <button id="guide-install-btn" class="bg-tertiary text-background-dark font-bold py-3 px-8 rounded-xl shadow-neon-tertiary transition-all transform hover:scale-105 flex items-center gap-2 mx-auto">
                    <span class="material-symbols-outlined">download</span>
                    Install App Now
                </button>
                <p class="text-xs text-text-muted mt-2">or follow the manual instructions below</p>
            </div>
            
            <div class="grid md:grid-cols-3 gap-6">
                <!-- iOS -->
                <div class="bg-white/5 p-4 rounded-xl border border-white/10">
                    <div class="flex items-center gap-2 mb-3 text-white">
                        <span class="material-symbols-outlined">ios_share</span>
                        <h3 class="font-bold">iOS (Safari)</h3>
                    </div>
                    <ol class="text-sm text-text-muted space-y-2 list-decimal list-inside">
                        <li>Tap the <strong>Share</strong> button <span class="material-symbols-outlined text-xs align-middle">ios_share</span></li>
                        <li>Scroll down and tap <strong>Add to Home Screen</strong></li>
                        <li>Tap <strong>Add</strong> in the top right</li>
                    </ol>
                </div>

                <!-- Android -->
                <div class="bg-white/5 p-4 rounded-xl border border-white/10">
                    <div class="flex items-center gap-2 mb-3 text-white">
                        <span class="material-symbols-outlined">android</span>
                        <h3 class="font-bold">Android</h3>
                    </div>
                    <ol class="text-sm text-text-muted space-y-2 list-decimal list-inside">
                        <li>Tap the <strong>Menu</strong> (3 dots) <span class="material-symbols-outlined text-xs align-middle">more_vert</span></li>
                        <li>Tap <strong>Install App</strong> or <strong>Add to Home Screen</strong></li>
                        <li>Follow the prompts</li>
                    </ol>
                </div>

                <!-- Desktop -->
                <div class="bg-white/5 p-4 rounded-xl border border-white/10">
                    <div class="flex items-center gap-2 mb-3 text-white">
                        <span class="material-symbols-outlined">computer</span>
                        <h3 class="font-bold">Desktop</h3>
                    </div>
                    <ol class="text-sm text-text-muted space-y-2 list-decimal list-inside">
                        <li>Look for the install icon <span class="material-symbols-outlined text-xs align-middle">download</span> in the address bar</li>
                        <li>Click <strong>Install</strong></li>
                        <li>Or use Chrome menu &gt; Install StudiOS</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script type="module" src="./app.js"></script>
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('./sw.js')
            .then(registration => {
              console.log('ServiceWorker registration successful with scope: ', registration.scope);
            }, err => {
              console.log('ServiceWorker registration failed: ', err);
            });
        });
      }
    </script>

    <script>
      (function () {
        const QUOTES = [
          { text: "Small daily improvements are the key to long-term results.", author: "Unknown" },
          { text: "Discipline is choosing what is wanted most over what is wanted now.", author: "Abraham Lincoln" },
          { text: "Focus on progress, not perfection.", author: "Bill Phillips" },
          { text: "What gets measured gets improved.", author: "Peter Drucker" },
          { text: "The secret of getting ahead is getting started.", author: "Mark Twain" },
          { text: "Consistency beats intensity.", author: "Unknown" },
          { text: "Dream big. Start small. Act now.", author: "Robin Sharma" },
          { text: "Energy flows where attention goes.", author: "Tony Robbins" },
          { text: "Don‚Äôt count the days; make the days count.", author: "Muhammad Ali" },
          { text: "Action is the foundational key to success.", author: "Pablo Picasso" },
          { text: "Simplicity is the ultimate sophistication.", author: "Leonardo da Vinci" },
          { text: "If it‚Äôs important, schedule it.", author: "Stephen Covey" }
        ];
    
        const $text = document.getElementById("quoteText");
        const $author = document.getElementById("quoteAuthor");
        const $refresh = document.getElementById("quoteRefresh");
    
        if (!$text || !$author) return;
    
        function dayKey(d = new Date()) {
          return d.toISOString().slice(0, 10); // YYYY-MM-DD
        }
    
        function pickIndex(exclude = -1) {
          if (QUOTES.length === 1) return 0;
          let idx = Math.floor(Math.random() * QUOTES.length);
          if (idx === exclude) idx = (idx + 1) % QUOTES.length;
          return idx;
        }
    
        function setQuote(idx) {
          const q = QUOTES[idx];
          // Animate in
          $text.classList.remove("show");
          requestAnimationFrame(() => {
            requestAnimationFrame(() => {
              $text.textContent = q.text;
              $author.textContent = q.author ? "‚Äî " + q.author : "";
              $text.classList.add("show");
            });
          });
        }
    
        // Persist per day to avoid jarring changes
        const KEY = "motivation:index:" + dayKey();
        let idx = Number(localStorage.getItem(KEY));
        if (!Number.isInteger(idx) || idx < 0 || idx >= QUOTES.length) {
          idx = pickIndex();
          localStorage.setItem(KEY, String(idx));
        }
        setQuote(idx);
    
        // Optional: manual refresh (does not change the daily key, so temporary)
        if ($refresh) {
          $refresh.addEventListener("click", () => {
            idx = pickIndex(idx);
            setQuote(idx);
          });
        }
      })();
    </script>

    
</body>
</html>





