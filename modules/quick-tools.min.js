const quickToolsModule={isExpanded:!1,init(){this.createQuickToolbar(),this.setupKeyboardShortcuts()},createQuickToolbar(){const t=document.getElementById("quick-tools-sidebar");t&&t.remove();const e=document.createElement("div");e.id="quick-tools-sidebar",e.className="fixed right-4 bottom-24 z-[100] flex flex-col gap-2",e.innerHTML='\n      <div id="quick-tools-buttons" class="flex flex-col gap-2 p-2 bg-card/90 backdrop-blur-xl rounded-2xl border border-primary/30 shadow-lg transition-all duration-300">\n        <button id="quick-pomodoro" class="quick-tool-btn p-3 bg-primary/20 hover:bg-primary/40 rounded-xl transition-all hover:scale-110 group relative" title="Quick Pomodoro (P)">\n          <span class="text-xl">ğŸ…</span>\n          <span class="quick-tool-label">Pomodoro</span>\n        </button>\n        <button id="quick-add-habit" class="quick-tool-btn p-3 bg-tertiary/20 hover:bg-tertiary/40 rounded-xl transition-all hover:scale-110 group relative" title="Add Habit (H)">\n          <span class="text-xl">â•</span>\n          <span class="quick-tool-label">Add Habit</span>\n        </button>\n        <button id="quick-calculator" class="quick-tool-btn p-3 bg-secondary/20 hover:bg-secondary/40 rounded-xl transition-all hover:scale-110 group relative" title="Calculator (C)">\n          <span class="text-xl">ğŸ§®</span>\n          <span class="quick-tool-label">Calculator</span>\n        </button>\n        <button id="quick-search" class="quick-tool-btn p-3 bg-accent/20 hover:bg-accent/40 rounded-xl transition-all hover:scale-110 group relative" title="Quick Search (/)">\n          <span class="text-xl">ğŸ”</span>\n          <span class="quick-tool-label">Search</span>\n        </button>\n        <button id="quick-tour" class="quick-tool-btn p-3 bg-secondary/20 hover:bg-secondary/40 rounded-xl transition-all hover:scale-110 group relative" title="Feature Tour">\n          <span class="text-xl">â“</span>\n          <span class="quick-tool-label">Feature Tour</span>\n        </button>\n      </div>\n      <button id="quick-tools-toggle" class="p-3 bg-primary rounded-full shadow-neon hover:scale-110 transition-all self-center" title="Quick Tools">\n        <span class="material-symbols-outlined text-white" id="quick-tools-icon">bolt</span>\n      </button>\n    ';const o=document.createElement("style");o.textContent="\n      .quick-tool-label {\n        position: absolute;\n        right: 100%;\n        top: 50%;\n        transform: translateY(-50%);\n        background: rgba(0, 0, 0, 0.8);\n        color: white;\n        padding: 4px 10px;\n        border-radius: 6px;\n        font-size: 12px;\n        white-space: nowrap;\n        opacity: 0;\n        pointer-events: none;\n        transition: opacity 0.2s, transform 0.2s;\n        margin-right: 8px;\n      }\n      .quick-tool-btn:hover .quick-tool-label {\n        opacity: 1;\n      }\n      #quick-tools-buttons {\n        transform-origin: bottom center;\n        /* 1. Default state: Visible and clickable */\n        visibility: visible;\n        /* 2. When opening: visibility switches ON instantly (0s delay) */\n        transition: all 0.3s, visibility 0s;\n      }\n\n      #quick-tools-buttons.collapsed {\n        transform: scale(0.9);\n        opacity: 0;\n        /* 3. Collapsed state: strictly hidden (cannot be clicked) */\n        visibility: hidden;\n        /* 4. When closing: Wait 0.3s (your animation time) BEFORE switching to hidden */\n        transition: all 0.3s, visibility 0s linear 0.3s; \n      }\n    ",document.head.appendChild(o),document.body.appendChild(e),this.setupListeners();const n=document.getElementById("quick-tools-buttons");n&&n.classList.add("collapsed")},setupListeners(){document.getElementById("quick-tools-toggle")?.addEventListener("click",()=>this.toggleToolbar()),document.getElementById("quick-pomodoro")?.addEventListener("click",()=>this.startPomodoro()),document.getElementById("quick-add-habit")?.addEventListener("click",()=>this.showAddHabitModal()),document.getElementById("quick-calculator")?.addEventListener("click",()=>this.toggleCalculator()),document.getElementById("quick-search")?.addEventListener("click",()=>this.showSearchPalette()),document.getElementById("quick-tour")?.addEventListener("click",()=>this.startFeatureTour())},setupKeyboardShortcuts(){document.addEventListener("keydown",t=>{if("INPUT"!==t.target.tagName&&"TEXTAREA"!==t.target.tagName&&!t.target.isContentEditable){if(t.ctrlKey||t.metaKey)switch(t.key.toLowerCase()){case"p":t.preventDefault(),this.startPomodoro();break;case"h":t.preventDefault(),this.showAddHabitModal()}"/"!==t.key||t.ctrlKey||t.metaKey||(t.preventDefault(),this.showSearchPalette())}})},toggleToolbar(){const t=document.getElementById("quick-tools-buttons"),e=document.getElementById("quick-tools-icon");t&&(this.isExpanded=!this.isExpanded,t.classList.toggle("collapsed",!this.isExpanded),e&&(e.textContent=this.isExpanded?"close":"bolt"))},startPomodoro(){if("function"==typeof switchViewWithAnimation)switchViewWithAnimation("study-view");else if("function"==typeof window.switchView)window.switchView("study-view");else{document.querySelectorAll(".view").forEach(t=>t.classList.add("hidden"));const t=document.getElementById("study-view");t&&t.classList.remove("hidden")}setTimeout(()=>{const t=document.getElementById("pomodoro-timer");t&&t.scrollIntoView({behavior:"smooth",block:"center"})},300),this.isExpanded&&this.toggleToolbar(),"function"==typeof showToast&&showToast("ğŸ… Pomodoro ready! Click Start","info")},showAddHabitModal(){const t=document.getElementById("add-habit-btn");t?t.click():this.createQuickHabitModal(),this.isExpanded&&this.toggleToolbar()},createQuickHabitModal(){const t=document.getElementById("modal-container");t&&(t.innerHTML='\n      <div class="modal-overlay fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4">\n        <div class="bg-card rounded-3xl p-6 max-w-md w-full border border-glass-border shadow-2xl">\n          <h2 class="text-xl font-bold text-text-default mb-4">â• Quick Add Habit</h2>\n          <div class="space-y-4">\n            <input type="text" id="quick-habit-name" placeholder="Habit name (e.g., Read 30 mins)" \n                   class="w-full p-3 rounded-xl border border-glass-border bg-white/10 text-text-default placeholder-text-muted focus:border-primary focus:ring-1 focus:ring-primary outline-none">\n            <select id="quick-habit-category" \n                    class="w-full p-3 rounded-xl border border-glass-border bg-white/10 text-text-default focus:border-primary outline-none">\n              <option value="study">ğŸ“š Study</option>\n              <option value="reading">ğŸ“– Reading</option>\n              <option value="health">ğŸ’ª Health</option>\n              <option value="mindfulness">ğŸ§˜ Mindfulness</option>\n              <option value="other">âœ¨ Other</option>\n            </select>\n            <div class="flex gap-3">\n              <button id="quick-habit-cancel" class="flex-1 py-3 px-4 rounded-xl border border-glass-border text-text-muted hover:bg-white/10 transition-all">Cancel</button>\n              <button id="quick-habit-save" class="flex-1 py-3 px-4 rounded-xl bg-primary text-white font-bold hover:bg-primary/90 transition-all shadow-neon">Add Habit</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    ',t.classList.remove("hidden"),document.getElementById("quick-habit-name")?.focus(),document.getElementById("quick-habit-cancel")?.addEventListener("click",()=>{t.classList.add("hidden"),t.innerHTML=""}),document.getElementById("quick-habit-save")?.addEventListener("click",()=>{const e=document.getElementById("quick-habit-name")?.value.trim(),o=document.getElementById("quick-habit-category")?.value;e&&("function"==typeof window.addHabit?window.addHabit({name:e,category:o}):"function"==typeof window.habitsModule?.addHabit&&window.habitsModule.addHabit({name:e,category:o}),"function"==typeof showToast&&showToast(`Added habit: ${e}`,"success"),t.classList.add("hidden"),t.innerHTML="")}),t.querySelector(".modal-overlay")?.addEventListener("click",e=>{e.target===e.currentTarget&&(t.classList.add("hidden"),t.innerHTML="")}))},toggleCalculator(){"function"==typeof switchViewWithAnimation?switchViewWithAnimation("study-view"):"function"==typeof window.switchView&&window.switchView("study-view"),setTimeout(()=>{const t=document.getElementById("calculator-section");t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.classList.add("ring-2","ring-primary"),setTimeout(()=>t.classList.remove("ring-2","ring-primary"),2e3))},300),this.isExpanded&&this.toggleToolbar()},showSearchPalette(){const t=document.createElement("div");t.id="command-palette",t.className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-start justify-center z-50 pt-[15vh]",t.innerHTML=`\n      <div class="bg-card rounded-2xl p-4 w-full max-w-md border border-glass-border shadow-2xl">\n        <input type="text" id="command-search" placeholder="Search or jump to..." \n               class="w-full p-3 rounded-xl border border-glass-border bg-white/10 text-text-default placeholder-text-muted focus:border-primary outline-none mb-3">\n        <div id="command-list" class="space-y-1">\n          ${[{key:"D",label:"ğŸ  Dashboard",viewId:"dashboard-view"},{key:"S",label:"ğŸ“š Study Zone",viewId:"study-view"},{key:"A",label:"ğŸ“Š Analytics",viewId:"analytics-view"},{key:"R",label:"ğŸ† Rewards",viewId:"rewards-view"}].map((t,e)=>`\n            <button class="command-item w-full text-left p-3 rounded-xl hover:bg-primary/20 text-text-default flex items-center justify-between transition-all ${0===e?"bg-primary/10":""}" data-view="${t.viewId}">\n              <span>${t.label}</span>\n              <kbd class="px-2 py-1 bg-white/10 rounded text-xs text-text-muted">${t.key}</kbd>\n            </button>\n          `).join("")}\n        </div>\n      </div>\n    `,document.body.appendChild(t),document.getElementById("command-search")?.focus(),t.querySelectorAll(".command-item").forEach(e=>{e.addEventListener("click",()=>{const o=e.dataset.view;"function"==typeof switchViewWithAnimation?switchViewWithAnimation(o):"function"==typeof window.switchView&&window.switchView(o),t.remove()})}),document.getElementById("command-search")?.addEventListener("input",e=>{const o=e.target.value.toLowerCase();t.querySelectorAll(".command-item").forEach(t=>{const e=t.textContent.toLowerCase();t.style.display=e.includes(o)?"":"none"})}),t.addEventListener("click",e=>{e.target===t&&t.remove()}),document.addEventListener("keydown",function e(o){"Escape"===o.key&&(t.remove(),document.removeEventListener("keydown",e))}),this.isExpanded&&this.toggleToolbar()},startFeatureTour(){"function"==typeof window.showOnboardingTour?window.showOnboardingTour():"function"==typeof showOnboardingTour?showOnboardingTour():"function"==typeof showToast&&showToast("Feature Tour will be available shortly!","info"),this.isExpanded&&this.toggleToolbar()}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>quickToolsModule.init()):quickToolsModule.init(),window.quickToolsModule=quickToolsModule;